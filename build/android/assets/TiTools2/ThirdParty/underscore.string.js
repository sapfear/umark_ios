!function(e,t){"use strict";var n=t.prototype.trim,a=t.prototype.trimRight,r=t.prototype.trimLeft,i=function(e){return 1*e||0},s=function(e,t){if(t<1)return"";for(var n="";t>0;)1&t&&(n+=e),t>>=1,e+=e;return n},o=[].slice,u=function(e){return null==e?"\\s":e.source?e.source:"["+c.escapeRegExp(e)+"]"},l={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},d={};for(var _ in l)d[l[_]]=_;var m=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var n=s,a=function(){return a.cache.hasOwnProperty(arguments[0])||(a.cache[arguments[0]]=a.parse(arguments[0])),a.format.call(null,a.cache[arguments[0]],arguments)};return a.format=function(a,r){var i,s,o,u,l,d,_,c=1,h=a.length,M="",p=[];for(s=0;s<h;s++)if(M=e(a[s]),"string"===M)p.push(a[s]);else if("array"===M){if(u=a[s],u[2])for(i=r[c],o=0;o<u[2].length;o++){if(!i.hasOwnProperty(u[2][o]))throw new Error(m('[_.sprintf] property "%s" does not exist',u[2][o]));i=i[u[2][o]]}else i=u[1]?r[u[1]]:r[c++];if(/[^s]/.test(u[8])&&"number"!=e(i))throw new Error(m("[_.sprintf] expecting number but found %s",e(i)));switch(u[8]){case"b":i=i.toString(2);break;case"c":i=t.fromCharCode(i);break;case"d":i=parseInt(i,10);break;case"e":i=u[7]?i.toExponential(u[7]):i.toExponential();break;case"f":i=u[7]?parseFloat(i).toFixed(u[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i=t(i))&&u[7]?i.substring(0,u[7]):i;break;case"u":i=Math.abs(i);break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}i=/[def]/.test(u[8])&&u[3]&&i>=0?"+"+i:i,d=u[4]?"0"==u[4]?"0":u[4].charAt(1):" ",_=u[6]-t(i).length,l=u[6]?n(d,_):"",p.push(u[5]?i+l:l+i)}return p.join("")},a.cache={},a.parse=function(e){for(var t=e,n=[],a=[],r=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))a.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))a.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw new Error("[_.sprintf] huh?");if(n[2]){r|=1;var i=[],s=n[2],o=[];if(null===(o=/^([a-z_][a-z_\d]*)/i.exec(s)))throw new Error("[_.sprintf] huh?");for(i.push(o[1]);""!==(s=s.substring(o[0].length));)if(null!==(o=/^\.([a-z_][a-z_\d]*)/i.exec(s)))i.push(o[1]);else{if(null===(o=/^\[(\d+)\]/.exec(s)))throw new Error("[_.sprintf] huh?");i.push(o[1])}n[2]=i}else r|=2;if(3===r)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");a.push(n)}t=t.substring(n[0].length)}return a},a}(),c={VERSION:"2.3.0",isBlank:function(e){return null==e&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return null==e?"":t(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=null==e?"":t(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,n){return null==e?[]:(e=t(e),n=~~n,n>0?e.match(new RegExp(".{1,"+n+"}","g")):[e])},clean:function(e){return c.strip(e).replace(/\s+/g," ")},count:function(e,n){return null==e||null==n?0:t(e).split(n).length-1},chars:function(e){return null==e?[]:t(e).split("")},swapCase:function(e){return null==e?"":t(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return null==e?"":t(e).replace(/[&<>"']/g,function(e){return"&"+d[e]+";"})},unescapeHTML:function(e){return null==e?"":t(e).replace(/\&([^;]+);/g,function(e,n){var a;return n in l?l[n]:(a=n.match(/^#x([\da-fA-F]+)$/))?t.fromCharCode(parseInt(a[1],16)):(a=n.match(/^#(\d+)$/))?t.fromCharCode(~~a[1]):e})},escapeRegExp:function(e){return null==e?"":t(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,t,n,a){var r=c.chars(e);return r.splice(~~t,~~n,a),r.join("")},insert:function(e,t,n){return c.splice(e,t,0,n)},include:function(e,n){return""===n||null!=e&&t(e).indexOf(n)!==-1},join:function(){var e=o.call(arguments),t=e.shift();return null==t&&(t=""),e.join(t)},lines:function(e){return null==e?[]:t(e).split("\n")},reverse:function(e){return c.chars(e).reverse().join("")},startsWith:function(e,n){return""===n||null!=e&&null!=n&&(e=t(e),n=t(n),e.length>=n.length&&e.slice(0,n.length)===n)},endsWith:function(e,n){return""===n||null!=e&&null!=n&&(e=t(e),n=t(n),e.length>=n.length&&e.slice(e.length-n.length)===n)},succ:function(e){return null==e?"":(e=t(e),e.slice(0,-1)+t.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return null==e?"":t(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return c.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t.toUpperCase()})},underscored:function(e){return c.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return c.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return c.titleize(t(e).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(e){return c.capitalize(c.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,a){return null==e?"":!a&&n?n.call(e):(a=u(a),t(e).replace(new RegExp("^"+a+"+|"+a+"+$","g"),""))},ltrim:function(e,n){return null==e?"":!n&&r?r.call(e):(n=u(n),t(e).replace(new RegExp("^"+n+"+"),""))},rtrim:function(e,n){return null==e?"":!n&&a?a.call(e):(n=u(n),t(e).replace(new RegExp(n+"+$"),""))},truncate:function(e,n,a){return null==e?"":(e=t(e),a=a||"...",n=~~n,e.length>n?e.slice(0,n)+a:e)},prune:function(e,n,a){if(null==e)return"";if(e=t(e),n=~~n,a=null!=a?t(a):"...",e.length<=n)return e;var r=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},i=e.slice(0,n+1).replace(/.(?=\W*\w*$)/g,r);return i=i.slice(i.length-2).match(/\w\w/)?i.replace(/\s*\S+$/,""):c.rtrim(i.slice(0,i.length-1)),(i+a).length>e.length?e:e.slice(0,i.length)+a},words:function(e,t){return c.isBlank(e)?[]:c.trim(e,t).split(t||/\s+/)},pad:function(e,n,a,r){e=null==e?"":t(e),n=~~n;var i=0;switch(a?a.length>1&&(a=a.charAt(0)):a=" ",r){case"right":return i=n-e.length,e+s(a,i);case"both":return i=n-e.length,s(a,Math.ceil(i/2))+e+s(a,Math.floor(i/2));default:return i=n-e.length,s(a,i)+e}},lpad:function(e,t,n){return c.pad(e,t,n)},rpad:function(e,t,n){return c.pad(e,t,n,"right")},lrpad:function(e,t,n){return c.pad(e,t,n,"both")},sprintf:m,vsprintf:function(e,t){return t.unshift(e),m.apply(null,t)},toNumber:function(e,n){if(null==e||""==e)return 0;e=t(e);var a=i(i(e).toFixed(~~n));return 0!==a||e.match(/^0+$/)?a:Number.NaN},numberFormat:function(e,t,n,a){if(isNaN(e)||null==e)return"";e=e.toFixed(~~t),a=a||",";var r=e.split("."),i=r[0],s=r[1]?(n||".")+r[1]:"";return i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+a)+s},strRight:function(e,n){if(null==e)return"";e=t(e),n=null!=n?t(n):n;var a=n?e.indexOf(n):-1;return~a?e.slice(a+n.length,e.length):e},strRightBack:function(e,n){if(null==e)return"";e=t(e),n=null!=n?t(n):n;var a=n?e.lastIndexOf(n):-1;return~a?e.slice(a+n.length,e.length):e},strLeft:function(e,n){if(null==e)return"";e=t(e),n=null!=n?t(n):n;var a=n?e.indexOf(n):-1;return~a?e.slice(0,a):e},strLeftBack:function(e,t){if(null==e)return"";e+="",t=null!=t?""+t:t;var n=e.lastIndexOf(t);return~n?e.slice(0,n):e},toSentence:function(e,t,n,a){t=t||", ",n=n||" and ";var r=e.slice(),i=r.pop();return e.length>2&&a&&(n=c.rtrim(t)+n),r.length?r.join(t)+n+i:i},toSentenceSerial:function(){var e=o.call(arguments);return e[3]=!0,c.toSentence.apply(c,e)},slugify:function(e){if(null==e)return"";var n="ąàáäâãåæćęèéëêìíïîłńòóöôõøùúüûñçżź",a="aaaaaaaaceeeeeiiiilnoooooouuuunczz",r=new RegExp(u(n),"g");return e=t(e).toLowerCase().replace(r,function(e){var t=n.indexOf(e);return a.charAt(t)||"-"}),c.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,t){return[t,e,t].join("")},quote:function(e){return c.surround(e,'"')},exports:function(){var e={};for(var t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse)$/)&&(e[t]=this[t]);return e},repeat:function(e,n,a){if(null==e)return"";if(n=~~n,null==a)return s(t(e),n);for(var r=[];n>0;r[--n]=e);return r.join(a)},levenshtein:function(e,n){if(null==e&&null==n)return 0;if(null==e)return t(n).length;if(null==n)return t(e).length;e=t(e),n=t(n);for(var a,r,i=[],s=0;s<=n.length;s++)for(var o=0;o<=e.length;o++)r=s&&o?e.charAt(o-1)===n.charAt(s-1)?a:Math.min(i[o],i[o-1],a)+1:s+o,a=i[o],i[o]=r;return i.pop()}};c.strip=c.trim,c.lstrip=c.ltrim,c.rstrip=c.rtrim,c.center=c.lrpad,c.rjust=c.lpad,c.ljust=c.rpad,c.contains=c.include,c.q=c.quote,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=c),exports._s=c):"function"==typeof define&&define.amd?define("underscore.string",[],function(){return c}):(e._=e._||{},e._.string=e._.str=c)}(this,String);