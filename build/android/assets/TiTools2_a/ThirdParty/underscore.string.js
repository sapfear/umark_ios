!function(e,t){"use strict";var r=t.prototype.trim,n=t.prototype.trimRight,a=t.prototype.trimLeft,i=function(e){return 1*e||0},o=function(e,t){if(t<1)return"";for(var r="";t>0;)1&t&&(r+=e),t>>=1,e+=e;return r},s=[].slice,u=function(e){return null==e?"\\s":e.source?e.source:"["+m.escapeRegExp(e)+"]"},l={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},d={};for(var _ in l)d[l[_]]=_;var c=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var r=o,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,a){var i,o,s,u,l,d,_,m=1,h=n.length,f="",p=[];for(o=0;o<h;o++)if(f=e(n[o]),"string"===f)p.push(n[o]);else if("array"===f){if(u=n[o],u[2])for(i=a[m],s=0;s<u[2].length;s++){if(!i.hasOwnProperty(u[2][s]))throw new Error(c('[_.sprintf] property "%s" does not exist',u[2][s]));i=i[u[2][s]]}else i=u[1]?a[u[1]]:a[m++];if(/[^s]/.test(u[8])&&"number"!=e(i))throw new Error(c("[_.sprintf] expecting number but found %s",e(i)));switch(u[8]){case"b":i=i.toString(2);break;case"c":i=t.fromCharCode(i);break;case"d":i=parseInt(i,10);break;case"e":i=u[7]?i.toExponential(u[7]):i.toExponential();break;case"f":i=u[7]?parseFloat(i).toFixed(u[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i=t(i))&&u[7]?i.substring(0,u[7]):i;break;case"u":i=Math.abs(i);break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}i=/[def]/.test(u[8])&&u[3]&&i>=0?"+"+i:i,d=u[4]?"0"==u[4]?"0":u[4].charAt(1):" ",_=u[6]-t(i).length,l=u[6]?r(d,_):"",p.push(u[5]?i+l:l+i)}return p.join("")},n.cache={},n.parse=function(e){for(var t=e,r=[],n=[],a=0;t;){if(null!==(r=/^[^\x25]+/.exec(t)))n.push(r[0]);else if(null!==(r=/^\x25{2}/.exec(t)))n.push("%");else{if(null===(r=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw new Error("[_.sprintf] huh?");if(r[2]){a|=1;var i=[],o=r[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(o)))throw new Error("[_.sprintf] huh?");for(i.push(s[1]);""!==(o=o.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(o)))i.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(o)))throw new Error("[_.sprintf] huh?");i.push(s[1])}r[2]=i}else a|=2;if(3===a)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");n.push(r)}t=t.substring(r[0].length)}return n},n}(),m={VERSION:"2.3.0",isBlank:function(e){return null==e&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return null==e?"":t(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=null==e?"":t(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,r){return null==e?[]:(e=t(e),r=~~r,r>0?e.match(new RegExp(".{1,"+r+"}","g")):[e])},clean:function(e){return m.strip(e).replace(/\s+/g," ")},count:function(e,r){return null==e||null==r?0:t(e).split(r).length-1},chars:function(e){return null==e?[]:t(e).split("")},swapCase:function(e){return null==e?"":t(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return null==e?"":t(e).replace(/[&<>"']/g,function(e){return"&"+d[e]+";"})},unescapeHTML:function(e){return null==e?"":t(e).replace(/\&([^;]+);/g,function(e,r){var n;return r in l?l[r]:(n=r.match(/^#x([\da-fA-F]+)$/))?t.fromCharCode(parseInt(n[1],16)):(n=r.match(/^#(\d+)$/))?t.fromCharCode(~~n[1]):e})},escapeRegExp:function(e){return null==e?"":t(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,t,r,n){var a=m.chars(e);return a.splice(~~t,~~r,n),a.join("")},insert:function(e,t,r){return m.splice(e,t,0,r)},include:function(e,r){return""===r||null!=e&&t(e).indexOf(r)!==-1},join:function(){var e=s.call(arguments),t=e.shift();return null==t&&(t=""),e.join(t)},lines:function(e){return null==e?[]:t(e).split("\n")},reverse:function(e){return m.chars(e).reverse().join("")},startsWith:function(e,r){return""===r||null!=e&&null!=r&&(e=t(e),r=t(r),e.length>=r.length&&e.slice(0,r.length)===r)},endsWith:function(e,r){return""===r||null!=e&&null!=r&&(e=t(e),r=t(r),e.length>=r.length&&e.slice(e.length-r.length)===r)},succ:function(e){return null==e?"":(e=t(e),e.slice(0,-1)+t.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return null==e?"":t(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return m.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t.toUpperCase()})},underscored:function(e){return m.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return m.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return m.titleize(t(e).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(e){return m.capitalize(m.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,n){return null==e?"":!n&&r?r.call(e):(n=u(n),t(e).replace(new RegExp("^"+n+"+|"+n+"+$","g"),""))},ltrim:function(e,r){return null==e?"":!r&&a?a.call(e):(r=u(r),t(e).replace(new RegExp("^"+r+"+"),""))},rtrim:function(e,r){return null==e?"":!r&&n?n.call(e):(r=u(r),t(e).replace(new RegExp(r+"+$"),""))},truncate:function(e,r,n){return null==e?"":(e=t(e),n=n||"...",r=~~r,e.length>r?e.slice(0,r)+n:e)},prune:function(e,r,n){if(null==e)return"";if(e=t(e),r=~~r,n=null!=n?t(n):"...",e.length<=r)return e;var a=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},i=e.slice(0,r+1).replace(/.(?=\W*\w*$)/g,a);return i=i.slice(i.length-2).match(/\w\w/)?i.replace(/\s*\S+$/,""):m.rtrim(i.slice(0,i.length-1)),(i+n).length>e.length?e:e.slice(0,i.length)+n},words:function(e,t){return m.isBlank(e)?[]:m.trim(e,t).split(t||/\s+/)},pad:function(e,r,n,a){e=null==e?"":t(e),r=~~r;var i=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",a){case"right":return i=r-e.length,e+o(n,i);case"both":return i=r-e.length,o(n,Math.ceil(i/2))+e+o(n,Math.floor(i/2));default:return i=r-e.length,o(n,i)+e}},lpad:function(e,t,r){return m.pad(e,t,r)},rpad:function(e,t,r){return m.pad(e,t,r,"right")},lrpad:function(e,t,r){return m.pad(e,t,r,"both")},sprintf:c,vsprintf:function(e,t){return t.unshift(e),c.apply(null,t)},toNumber:function(e,r){if(null==e||""==e)return 0;e=t(e);var n=i(i(e).toFixed(~~r));return 0!==n||e.match(/^0+$/)?n:Number.NaN},numberFormat:function(e,t,r,n){if(isNaN(e)||null==e)return"";e=e.toFixed(~~t),n=n||",";var a=e.split("."),i=a[0],o=a[1]?(r||".")+a[1]:"";return i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+n)+o},strRight:function(e,r){if(null==e)return"";e=t(e),r=null!=r?t(r):r;var n=r?e.indexOf(r):-1;return~n?e.slice(n+r.length,e.length):e},strRightBack:function(e,r){if(null==e)return"";e=t(e),r=null!=r?t(r):r;var n=r?e.lastIndexOf(r):-1;return~n?e.slice(n+r.length,e.length):e},strLeft:function(e,r){if(null==e)return"";e=t(e),r=null!=r?t(r):r;var n=r?e.indexOf(r):-1;return~n?e.slice(0,n):e},strLeftBack:function(e,t){if(null==e)return"";e+="",t=null!=t?""+t:t;var r=e.lastIndexOf(t);return~r?e.slice(0,r):e},toSentence:function(e,t,r,n){t=t||", ",r=r||" and ";var a=e.slice(),i=a.pop();return e.length>2&&n&&(r=m.rtrim(t)+r),a.length?a.join(t)+r+i:i},toSentenceSerial:function(){var e=s.call(arguments);return e[3]=!0,m.toSentence.apply(m,e)},slugify:function(e){if(null==e)return"";var r="ąàáäâãåæćęèéëêìíïîłńòóöôõøùúüûñçżź",n="aaaaaaaaceeeeeiiiilnoooooouuuunczz",a=new RegExp(u(r),"g");return e=t(e).toLowerCase().replace(a,function(e){var t=r.indexOf(e);return n.charAt(t)||"-"}),m.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,t){return[t,e,t].join("")},quote:function(e){return m.surround(e,'"')},exports:function(){var e={};for(var t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse)$/)&&(e[t]=this[t]);return e},repeat:function(e,r,n){if(null==e)return"";if(r=~~r,null==n)return o(t(e),r);for(var a=[];r>0;a[--r]=e);return a.join(n)},levenshtein:function(e,r){if(null==e&&null==r)return 0;if(null==e)return t(r).length;if(null==r)return t(e).length;e=t(e),r=t(r);for(var n,a,i=[],o=0;o<=r.length;o++)for(var s=0;s<=e.length;s++)a=o&&s?e.charAt(s-1)===r.charAt(o-1)?n:Math.min(i[s],i[s-1],n)+1:o+s,n=i[s],i[s]=a;return i.pop()}};m.strip=m.trim,m.lstrip=m.ltrim,m.rstrip=m.rtrim,m.center=m.lrpad,m.rjust=m.lpad,m.ljust=m.rpad,m.contains=m.include,m.q=m.quote,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=m),exports._s=m):"function"==typeof define&&define.amd?define("underscore.string",[],function(){return m}):(e._=e._||{},e._.string=e._.str=m)}(this,String);